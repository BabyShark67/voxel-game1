<!DOCTYPE html> <html> <head> <meta charset="UTF-8"> <title>Voxel Sandbox</title> <style> body { margin: 0; overflow: hidden; background: #000; color: #fff; font-family: sans-serif; } #hud { position: fixed; top: 10px; left: 10px; z-index: 10; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 4px; font-size: 14px; } </style> </head> <body> <div id="hud"> <div>Block: <span id="blockName">Grass</span></div> <div>Controls: WASD move, Space jump, 1â€“3 change block, Left click break, Right click place</div> </div> <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script> <script> // ---------- BASIC SETUP ---------- let scene = new THREE.Scene(); scene.background = new THREE.Color(0x87ceeb); let camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 ); let renderer = new THREE.WebGLRenderer({ antialias: true }); renderer.setSize(window.innerWidth, window.innerHeight); document.body.appendChild(renderer.domElement); // ---------- LIGHTING ---------- scene.add(new THREE.AmbientLight(0xffffff, 0.7)); let sun = new THREE.DirectionalLight(0xffffff, 0.8); sun.position.set(30, 50, 30); scene.add(sun); // ---------- BLOCK TYPES ---------- const BLOCK_TYPES = { 1: { name: "Grass", color: 0x3ba635 }, 2: { name: "Dirt", color: 0x8b5a2b }, 3: { name: "Stone", color: 0x777777 } }; let currentBlockId = 1; document.getElementById("blockName").textContent = BLOCK_TYPES[currentBlockId].name; // ---------- WORLD ---------- const WORLD_SIZE = 32; let worldBlocks = {}; let blockMeshes = {}; const cubeGeo = new THREE.BoxGeometry(1, 1, 1); function key(x, y, z) { return `${x},${y},${z}`; } function createBlock(x, y, z, id) { let mat = new THREE.MeshLambertMaterial({ color: BLOCK_TYPES[id].color }); let mesh = new THREE.Mesh(cubeGeo, mat); mesh.position.set(x, y, z); scene.add(mesh); return mesh; } function setBlock(x, y, z, id) { let k = key(x, y, z); if (blockMeshes[k]) scene.remove(blockMeshes[k]); worldBlocks[k] = id; blockMeshes[k] = createBlock(x, y, z, id); } function noise(x, z) { let n = x * 374761393 + z * 668265263; n = (n ^ (n >> 13)) * 1274126177; return ((n ^ (n >> 16)) & 0xffff) / 0xffff; } function generateWorld() { for (let x = -WORLD_SIZE / 2; x < WORLD_SIZE / 2; x++) { for (let z = -WORLD_SIZE / 2; z < WORLD_SIZE / 2; z++) { let h = Math.floor(4 + noise(x, z) * 6); for (let y = 0; y <= h; y++) { let id = (y === h) ? 1 : (y > h - 3 ? 2 : 3); setBlock(x, y, z, id); } } } } // ---------- PLAYER ---------- let player = { x: 0, y: 20, z: 0, vx: 0, vy: 0, vz: 0, onGround: false }; camera.position.set(0, 22, 5); // ---------- INPUT ---------- let keys = {}; window.addEventListener("keydown", e => { keys[e.code] = true; if (e.code === "Digit1") currentBlockId = 1; if (e.code === "Digit2") currentBlockId = 2; if (e.code === "Digit3") currentBlockId = 3; document.getElementById("blockName").textContent = BLOCK_TYPES[currentBlockId].name; }); window.addEventListener("keyup", e => { keys[e.code] = false; }); // ---------- MOUSE LOOK ---------- let yaw = 0; let pitch = 0; document.body.addEventListener("click", () => { renderer.domElement.requestPointerLock(); }); document.addEventListener("mousemove", e => { if (document.pointerLockElement !== renderer.domElement) return; yaw -= e.movementX * 0.002; pitch -= e.movementY * 0.002; pitch = Math.max(-1.4, Math.min(1.4, pitch)); }); // ---------- MOVEMENT ---------- function updatePlayer(dt) { const speed = 6; const gravity = -20; const jump = 8; let forward = new THREE.Vector3(Math.sin(yaw), 0, Math.cos(yaw)); let right = new THREE.Vector3(Math.cos(yaw), 0, -Math.sin(yaw)); let move = new THREE.Vector3(); if (keys["KeyW"]) move.add(forward); if (keys["KeyS"]) move.sub(forward); if (keys["KeyA"]) move.sub(right); if (keys["KeyD"]) move.add(right); if (move.length() > 0) move.normalize(); player.vx = move.x * speed; player.vz = move.z * speed; player.vy += gravity * dt; if (keys["Space"] && player.onGround) { player.vy = jump; player.onGround = false; } player.x += player.vx * dt; player.y += player.vy * dt; player.z += player.vz * dt; if (player.y < 5) { player.y = 5; player.vy = 0; player.onGround = true; } let eye = new THREE.Vector3(player.x, player.y + 1.7, player.z); let look = new THREE.Vector3( Math.sin(yaw) * Math.cos(pitch), Math.sin(pitch), Math.cos(yaw) * Math.cos(pitch) ); camera.position.copy(eye); camera.lookAt(eye.clone().add(look)); } // ---------- LOOP ---------- let last = performance.now(); function loop(now) { let dt = (now - last) / 1000; last = now; updatePlayer(dt); renderer.render(scene, camera); requestAnimationFrame(loop); } // ---------- START ---------- generateWorld(); requestAnimationFrame(loop); window.addEventListener("resize", () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); }); </script> </body> </html>
