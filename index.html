<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Voxel Sandbox</title>
<style>
body { margin:0; overflow:hidden; background:#000; color:#fff; font-family:sans-serif; }
#hud {
  position:fixed; top:10px; left:10px; z-index:10;
  background:rgba(0,0,0,0.5); padding:8px; border-radius:4px; font-size:14px;
}
</style>
</head>
<body>

<div id="hud">
  <div>Block: <span id="blockName">Grass</span></div>
  <div>Controls: WASD move, Space jump, 1â€“3 change block, Left click break, Right click place</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>

<script>
// ---------- BASIC SETUP ----------
let scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// ---------- LIGHTING ----------
scene.add(new THREE.AmbientLight(0xffffff, 0.7));
let sun = new THREE.DirectionalLight(0xffffff, 0.8);
sun.position.set(30,50,30);
scene.add(sun);

// ---------- BLOCK TYPES ----------
const BLOCK_TYPES = {
  1:{name:"Grass", color:0x3ba635},
  2:{name:"Dirt",  color:0x8b5a2b},
  3:{name:"Stone", color:0x777777}
};
let currentBlockId = 1;
document.getElementById("blockName").textContent = BLOCK_TYPES[currentBlockId].name;

// ---------- WORLD ----------
const WORLD_SIZE = 32;
let worldBlocks = {};
let blockMeshes = {};
const cubeGeo = new THREE.BoxGeometry(1,1,1);

function key(x,y,z){ return `${x},${y},${z}`; }

function createBlock(x,y,z,id){
  let mat = new THREE.MeshLambertMaterial({color:BLOCK_TYPES[id].color});
  let mesh = new THREE.Mesh(cubeGeo, mat);
  mesh.position.set(x,y,z);
  scene.add(mesh);
  return mesh;
}

function setBlock(x,y,z,id){
  let k = key(x,y,z);
  if(blockMeshes[k]) scene.remove(blockMeshes[k]);
  worldBlocks[k] = id;
  blockMeshes[k] = createBlock(x,y,z,id);
}

function noise(x,z){
  let n =
